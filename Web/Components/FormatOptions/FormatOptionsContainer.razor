@using Formatter.Formatter
@using Formatter.Options
@using Web.Components.buttons

<div id="formatOptionsContainer">
    <div id="foInnerContainer">
        <h1 style="padding-bottom: 20px;"> Conversion Formatter </h1>
        
        <div id="ConversionFormatOptions">
            
            @* Type Declaration *@
            <Dropdown Options="_typeDeclarationOptions"
                      Title="Typescript Type Declaration"
                      OnValueChange="OnTypeDeclarationChange"/>
            
            <Dropdown Options="_namingConvention"
                      Title="Naming Convention"
                      OnValueChange="OnNamingConventionChange"/>
            
            <InputField Title="Tab Size"
                        OnValueChange="OnTabSizeChanged"/>
            
        </div>
    </div>
</div>

<style>
    
    h1 {
        font-weight: normal;
        color: var(--mainFontColor);
        font-size: 20px;
    }
    
    #formatOptionsContainer{
        display: flex;
        padding-block: 10px;
        width: 300px;
        height: auto;
        background-color: var(--mainBgColor);
        border-color: var(--mainBorderColor);
        border-style: solid;
        border-width: 1px 0 1px 1px;
        border-radius: 8px 0 0 8px;
    }
    
    #foInnerContainer {
        display: flex;
        width: 100%;
        height: 100%;
        flex-direction: column;
        align-items: center;
        gap:10px;
        padding: 10px;
    }
    
    #ConversionFormatOptions {
        display: flex;
        flex-direction: column;
        gap: 10px;
        width: 90%;
        justify-content: center;
    }
</style>


@code {

    readonly TypescriptFormatOptions options = TypescriptFormatOptions.GetInstance;

    readonly List<DropdownOption> _typeDeclarationOptions = new()
    {
        new DropdownOption("interface",0),
        new DropdownOption("class",1),
        new DropdownOption("struct",2)
    };
    
    readonly List<DropdownOption> _namingConvention = new()
    {
        new DropdownOption("camelCase",0),
        new DropdownOption("PascalCase",1),
        new DropdownOption("snake_case",2)
    };
    
    public void OnTypeDeclarationChange(DropdownOption value)
    {
        
    }
    
    public void OnNamingConventionChange(DropdownOption value)
    {
        
    }

    public void OnTabSizeChanged(string value)
    {
        if (!int.TryParse(value, out var val)) return;
        
        options.TabSize = val;
        Console.WriteLine($"Tab size set to: {options.TabSize}");
        StateHasChanged();
    }

}